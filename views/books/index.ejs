<% layout('boilerplate') -%>
<link rel="stylesheet" href="../../stylesheets/bookIndex.css">  
<div class="main"> 
    <div class="page-title">
        <h1>All Books!</h1>
    </div>
    <div class="add-book">
        <a href="books/new"> <button class="book-button">Add a New Book </button></a>
    </div>
    <div class="books">
        <% for (let  book of books) { %>
            <a href="/books/<%=book._id%>" style="display: block; width: 100%; height: 100%;" >
            <div class="book"> 

                <div class="image-wrapper">
                    <img class="book-image"src="<%=book.image%>" alt="">
                </div>
                <h2 class="book-title"> <%= book.title %> </h2>
                <h2 class="author"> <i> by <%= book.author %>  </i></h2>
                <p  class="description"><%= book.description %> </p>
                <h4 class="categories">  <span> Categories</span>: <% for(const [index,category] of book.categories.entries()) { %> 
                     <% if(index != book.categories.length-1){ %>
                        <%=category%>, 
                    <% } else { %>
                         <%=category%> 
                 <% } %>
                <% } %></h4>
            </div>
            </a>
        <% } %>
    </div>
</div>
